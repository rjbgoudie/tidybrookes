<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add a new definition of a Diagnosis PL item — condition_add • tidybrookes</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add a new definition of a Diagnosis PL item — condition_add"><meta name="description" content="Add a new definition of a Diagnosis PL item
Extract condition data into tidy format"><meta property="og:description" content="Add a new definition of a Diagnosis PL item
Extract condition data into tidy format"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidybrookes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tidybrookes.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add a new definition of a Diagnosis PL item</h1>

      <div class="d-none name"><code>condition_extract.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add a new definition of a Diagnosis PL item</p>
<p>Extract condition data into tidy format</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">condition_add</span><span class="op">(</span></span>
<span>  <span class="va">condition_def</span>,</span>
<span>  <span class="va">symbol</span>,</span>
<span>  <span class="va">title</span>,</span>
<span>  icd10 <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  condition_start_datetime_fn <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">diagnosis_datetime</span><span class="op">)</span> <span class="op">~</span></span>
<span>    <span class="va">diagnosis_datetime</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">entered_datetime</span><span class="op">)</span> <span class="op">~</span> <span class="va">entered_datetime</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  condition_end_datetime_fn <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">resolved_datetime</span><span class="op">)</span> <span class="op">~</span> <span class="va">resolved_datetime</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu">ymd_hms</span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  silently_exclude_deleted_when <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  silently_exclude_resolved_when <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">condition_extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">condition_def</span>, errors <span class="op">=</span> <span class="va">stop</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-condition-def">condition_def<a class="anchor" aria-label="anchor" href="#arg-condition-def"></a></dt>
<dd><p>A condition definition</p></dd>


<dt id="arg-symbol">symbol<a class="anchor" aria-label="anchor" href="#arg-symbol"></a></dt>
<dd><p>A short name for the condition item. This should be a
character vector that is suitable to use as an R object name</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>The full name for the condition item, suitable for using in
figure titles etc</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>condition data in tidy-column-name format (after applying
<code>condition_rename</code>)</p></dd>


<dt id="arg-errors">errors<a class="anchor" aria-label="anchor" href="#arg-errors"></a></dt>
<dd><p>A function indicating what to do when an error is found</p></dd>


<dt id="arg-icd-">icd_10<a class="anchor" aria-label="anchor" href="#arg-icd-"></a></dt>
<dd><p>A vector of ICD-10 codes to use.</p></dd>


<dt id="arg-silently-exclude-deleted">silently_exclude_deleted<a class="anchor" aria-label="anchor" href="#arg-silently-exclude-deleted"></a></dt>
<dd><p>When TRUE, diagnoses with
<code>status = "Deleted"</code> will be removed from the data frame. In theory, only
diagnoses made in error should be deleted, but in practice it is thought
that clinical staff often delete diagnoses that are resolved rather than
mark them as "Resolved".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the following columns:
<code>person_id</code>, <code>symbol</code>, <code>value_as_number</code>, <code>value_as_character</code>,
<code>censoring</code>, <code>ordered_datetime</code>, <code>collected_datetime</code>, <code>received_datetime</code>,
<code>result_datetime</code>, <code>ordering_department_name</code>, <code>range_low</code>, <code>range_high</code>,
<code>unit</code>, <code>name</code>, <code>title</code>, <code>method</code>, <code>group</code>, <code>type</code></p>
<p>The result will be sorted by diagnosis_datetime</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>R.J.B. Goudie</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by R.J.B Goudie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

